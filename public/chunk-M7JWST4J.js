import{B as w,C as M,x as O,y as P}from"./chunk-LHDBUF4B.js";import{$ as l,A as C,Ba as S,Ea as k,F as u,G as d,Ka as y,O as c,P as g,T as f,V as h,W as m,X as o,Y as i,_,aa as p,ca as s,ea as b,ka as x,o as v}from"./chunk-KUFX4WSM.js";function I(r,e){if(r&1){let t=_();o(0,"button",14),l("click",function(){u(t);let a=p();return d(a.startGame())}),s(1,"Comenzar juego"),i()}}function E(r,e){if(r&1){let t=_();o(0,"button",18),l("click",function(){u(t);let a=p(2);return d(a.startGame())}),s(1,"Jugar de nuevo"),i()}}function j(r,e){if(r&1){let t=_();o(0,"div",15)(1,"div",16)(2,"h4"),s(3,"Oops, te equivocaste!"),i(),o(4,"h4"),s(5),i(),f(6,E,2,0,"button",17),o(7,"button",18),l("click",function(){u(t);let a=p();return d(a.volverAlInicio())}),s(8,"Volver al inicio"),i()()()}if(r&2){let t=p();c(5),b("Tu cantidad de aciertos fue: ",t.currentStep,""),c(),h("ngIf",t.gameOver)}}var T=class r{constructor(e,t,n){this.router=e;this.firestore=t;this.auth=n}sequence=[];playerSequence=[];colors=["red","green","blue","yellow"];activeColor="";gameStarted=!1;gameOver=!1;currentStep=0;playerCanClick=!1;userEmail;ngOnInit(){this.auth.isLoggedIn().pipe(v(e=>({loggedIn:!!e,email:e?e.email:null}))).subscribe(({email:e})=>{this.userEmail=e})}startGame(){this.gameStarted=!0,this.gameOver=!1,this.sequence=[],this.playerSequence=[],this.currentStep=0,this.nextRound()}nextRound(){this.playerCanClick=!1,this.playerSequence=[],this.currentStep=0;let e=this.colors[Math.floor(Math.random()*this.colors.length)];this.sequence.push(e),this.playSequence()}playSequence(){this.playerCanClick=!1;let e=500;this.sequence.forEach((t,n)=>{setTimeout(()=>{this.activeColor=t,setTimeout(()=>{this.activeColor=""},300)},e*n)}),setTimeout(()=>{this.playerCanClick=!0},e*this.sequence.length)}playerClick(e){if(!(!this.gameStarted||this.gameOver||!this.playerCanClick)){if(this.playerSequence.push(e),this.activeColor=e,setTimeout(()=>{this.activeColor=""},300),this.sequence[this.currentStep]!==e){this.gameOver=!0,this.playerCanClick=!1,this.guardarPuntaje();return}this.currentStep++,this.currentStep===this.sequence.length&&(this.playerCanClick=!1,setTimeout(()=>this.nextRound(),1e3))}}volverAlInicio(){this.router.navigate(["/home"])}guardarPuntaje(){let e=M(this.firestore,"puntajes");w(e,{usuario:this.userEmail,puntaje:this.currentStep,fecha:new Date,juego:"simon"})}static \u0275fac=function(t){return new(t||r)(g(y),g(P),g(O))};static \u0275cmp=C({type:r,selectors:[["app-simon"]],standalone:!0,features:[x],decls:16,vars:10,consts:[[1,"wrapper"],[1,"game-container"],[1,"simon-container"],[1,"simon-board"],[1,"color-container","red-container"],[1,"color","red",3,"click"],[1,"color-container","green-container"],[1,"color","green",3,"click"],[1,"color-container","blue-container"],[1,"color","blue",3,"click"],[1,"color-container","yellow-container"],[1,"color","yellow",3,"click"],["class","start-btn",3,"click",4,"ngIf"],["class","modal",4,"ngIf"],[1,"start-btn",3,"click"],[1,"modal"],[1,"modal-content"],["class","modal-button",3,"click",4,"ngIf"],[1,"modal-button",3,"click"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),s(3,"Simon"),i(),o(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5),l("click",function(){return n.playerClick("red")}),i()(),o(8,"div",6)(9,"div",7),l("click",function(){return n.playerClick("green")}),i()(),o(10,"div",8)(11,"div",9),l("click",function(){return n.playerClick("blue")}),i()(),o(12,"div",10)(13,"div",11),l("click",function(){return n.playerClick("yellow")}),i()()(),f(14,I,2,0,"button",12),i(),f(15,j,9,2,"div",13),i()()),t&2&&(c(7),m("active",n.activeColor==="red"),c(2),m("active",n.activeColor==="green"),c(2),m("active",n.activeColor==="blue"),c(2),m("active",n.activeColor==="yellow"),c(),h("ngIf",!n.gameStarted),c(),h("ngIf",n.gameOver))},dependencies:[k,S],styles:['.simon-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:60vh}.simon-board[_ngcontent-%COMP%]{position:relative;width:360px;height:360px;border-radius:50%;overflow:visible}.color-container[_ngcontent-%COMP%]{position:absolute;width:50%;height:50%}.red-container[_ngcontent-%COMP%]{top:0;left:0;border-top-left-radius:100%;transform:translate(-20px,-20px)}.green-container[_ngcontent-%COMP%]{top:0;right:0;border-top-right-radius:100%;transform:translate(20px,-20px)}.blue-container[_ngcontent-%COMP%]{bottom:0;right:0;border-bottom-right-radius:100%;transform:translate(20px,20px)}.yellow-container[_ngcontent-%COMP%]{bottom:0;left:0;border-bottom-left-radius:100%;transform:translate(-20px,20px)}.color[_ngcontent-%COMP%]{width:100%;height:100%;transform-origin:100% 100%;opacity:1;transition:all .2s ease;cursor:pointer;box-shadow:none;z-index:1}.color.active[_ngcontent-%COMP%]{filter:brightness(1.5);box-shadow:0 0 30px #ffffffb3;transform:scale(1.1)}.color[_ngcontent-%COMP%]:active{filter:brightness(1.8);transform:scale(1.15);box-shadow:0 0 40px #ffffffe6}.red[_ngcontent-%COMP%]{background-color:red}.green[_ngcontent-%COMP%]{background-color:green}.blue[_ngcontent-%COMP%]{background-color:#00f}.yellow[_ngcontent-%COMP%]{background-color:#ff0}.start-btn[_ngcontent-%COMP%]{margin-top:80px;padding:10px 20px;font-size:16px;cursor:pointer}.message[_ngcontent-%COMP%]{margin-top:20px;font-size:18px;color:#333}.game-container[_ngcontent-%COMP%]{text-align:center;font-family:Arial,sans-serif;height:73vh;width:150vh;border:10px solid rgb(137,142,148);background-color:#fff;box-shadow:0 0 15px #0000004d;overflow:auto}h4[_ngcontent-%COMP%]{font-size:20px;color:#333}h2[_ngcontent-%COMP%]{color:#4caf50}.wrapper[_ngcontent-%COMP%]{background-image:url("./media/fondo4-VYWSDTRN.jpg");height:90vh;display:flex;justify-content:center;align-items:center}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000000b3;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:8px;text-align:center}.modal-button[_ngcontent-%COMP%]{margin:10px}.buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:15px;margin-top:20px}button[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;border:none;border-radius:5px;padding:10px 15px;font-size:16px;cursor:pointer;transition:background-color .3s}button[_ngcontent-%COMP%]:hover{background-color:#45a049}']})};export{T as SimonComponent};
