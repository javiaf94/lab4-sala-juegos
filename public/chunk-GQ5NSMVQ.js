import{B as P,C as j,x as E,y as w}from"./chunk-LHDBUF4B.js";import{$ as p,A as b,Ba as M,Ea as k,F as u,G as d,Ka as I,N as C,O as o,P as f,T as _,V as l,X as a,Y as i,Z as v,_ as g,aa as m,ca as s,ea as h,ka as y,o as x}from"./chunk-KUFX4WSM.js";function O(r,e){if(r&1){let t=g();a(0,"div",6)(1,"button",7),p("click",function(){u(t);let c=m();return d(c.guess("mayor"))}),s(2,"Mayor"),i(),a(3,"button",7),p("click",function(){u(t);let c=m();return d(c.guess("menor"))}),s(4,"Menor"),i()()}}function V(r,e){if(r&1&&(a(0,"h4"),s(1),i()),r&2){let t=m();o(),h("Puntaje: ",t.score,"")}}function T(r,e){if(r&1&&(a(0,"h4"),s(1),i()),r&2){let t=m();o(),h("Intentos: ",t.attemptsLeft,"")}}function D(r,e){if(r&1){let t=g();a(0,"button",11),p("click",function(){u(t);let c=m(2);return d(c.resetGame())}),s(1,"Jugar de nuevo"),i()}}function A(r,e){if(r&1){let t=g();a(0,"div",8)(1,"div",9)(2,"h4"),s(3,"Agotaste tus intentos"),i(),a(4,"h4"),s(5),i(),_(6,D,2,0,"button",10),a(7,"button",11),p("click",function(){u(t);let c=m();return d(c.volverAlInicio())}),s(8,"Volver al inicio"),i()()()}if(r&2){let t=m();o(5),h("Puntaje: ",t.score,""),o(),l("ngIf",t.gameEnded)}}var S=class r{constructor(e,t,n){this.router=e;this.firestore=t;this.auth=n;this.resetGame()}deck=[];currentCard=null;nextCard=null;score=0;attemptsLeft=5;gameEnded=!1;userEmail;suits=["oro","espada","basto","copa"];ngOnInit(){this.auth.isLoggedIn().pipe(x(e=>({loggedIn:!!e,email:e?e.email:null}))).subscribe(({email:e})=>{this.userEmail=e})}resetGame(){this.deck=this.generateDeck(),this.currentCard=this.deck.pop()||null,this.score=0,this.attemptsLeft=5,this.gameEnded=!1}generateDeck(){let e=[];for(let t of this.suits)for(let n=1;n<=12;n++)e.push({number:n,suit:t});return this.shuffleDeck(e)}shuffleDeck(e){for(let t=e.length-1;t>0;t--){let n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}guess(e){if(!this.currentCard||this.attemptsLeft<=0||this.deck.length===0){this.gameEnded=!0;return}this.nextCard=this.deck.pop()||null,this.nextCard&&(e==="mayor"&&this.nextCard.number>=this.currentCard.number||e==="menor"&&this.nextCard.number<this.currentCard.number?this.score++:this.attemptsLeft--),this.currentCard=this.nextCard,(this.attemptsLeft<=0||this.deck.length===0)&&(this.guardarPuntaje(),this.gameEnded=!0)}volverAlInicio(){this.router.navigate(["/home"])}guardarPuntaje(){let e=j(this.firestore,"puntajes");P(e,{usuario:this.userEmail,puntaje:this.score,fecha:new Date,juego:"mayormenor"})}static \u0275fac=function(t){return new(t||r)(f(I),f(w),f(E))};static \u0275cmp=b({type:r,selectors:[["app-mayormenor"]],standalone:!0,features:[y],decls:9,vars:5,consts:[[1,"wrapper"],[1,"game-container"],[3,"src"],["class","buttons",4,"ngIf"],[4,"ngIf"],["class","modal",4,"ngIf"],[1,"buttons"],[3,"click"],[1,"modal"],[1,"modal-content"],["class","modal-button",3,"click",4,"ngIf"],[1,"modal-button",3,"click"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"div",1)(2,"h2"),s(3,"Mayor o Menor"),i(),v(4,"img",2),_(5,O,5,0,"div",3)(6,V,2,1,"h4",4)(7,T,2,1,"h4",4)(8,A,9,2,"div",5),i()()),t&2&&(o(4),l("src","./"+(n.currentCard==null?null:n.currentCard.number)+"-"+(n.currentCard==null?null:n.currentCard.suit)+".png",C),o(),l("ngIf",!n.gameEnded),o(),l("ngIf",!n.gameEnded),o(),l("ngIf",!n.gameEnded),o(),l("ngIf",n.gameEnded))},dependencies:[k,M],styles:['.game-container[_ngcontent-%COMP%]{text-align:center;font-family:Arial,sans-serif;height:73vh;width:150vh;border:10px solid rgb(137,142,148);background-color:#fff;box-shadow:0 0 15px #0000004d;overflow:auto}h4[_ngcontent-%COMP%]{font-size:20px;color:#333}h2[_ngcontent-%COMP%]{color:#4caf50}.buttons[_ngcontent-%COMP%]{margin:20px}button[_ngcontent-%COMP%]{padding:10px 20px;font-size:16px;margin:0 10px;cursor:pointer}.wrapper[_ngcontent-%COMP%]{background-image:url("./media/fondo4-VYWSDTRN.jpg");height:90vh;display:flex;justify-content:center;align-items:center}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000000b3;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:8px;text-align:center}.modal-button[_ngcontent-%COMP%]{margin:10px}.buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:15px;margin-top:20px}button[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;border:none;border-radius:5px;padding:10px 15px;font-size:16px;cursor:pointer;transition:background-color .3s}button[_ngcontent-%COMP%]:hover{background-color:#45a049}']})};export{S as MayormenorComponent};
